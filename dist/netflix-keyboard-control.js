!function(){"use strict";var n,i=function(t,e){var o=[];return(e||document).querySelectorAll(t).forEach(function(t){return o.push(t)}),o},c=function(){function o(){}return o.init=function(){document.addEventListener("keydown",o.handleKeyDown)},o.stop=function(){document.removeEventListener("keydown",o.handleKeyDown)},o.on=function(t,e){o.handlerGroups[t]||(o.handlerGroups[t]=[]),o.handlerGroups[t].push(e)},o.off=function(t,e){o.handlerGroups[t]&&(o.handlerGroups[t]=o.handlerGroups[t].filter(function(t){return t!==e}))},o.handleKeyDown=function(e){var t=e.key;(t.includes("Arrow")||t.includes("Enter"))&&e.preventDefault(),o.handlerGroups[t]&&o.handlerGroups[t].forEach(function(t){return t(e)})},o.handlerGroups={},o}();(n||(n={})).Slider=".lolomoRow_title_card:not( .lolomoBigRow )";var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function r(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var t,e=function(){function t(){}return t.prototype.isAtTop=function(){return!0},t.prototype.isAtBottom=function(){return!0},t}(),u=function(){function r(){}return r.init=function(){var t=document.createElement("div");t.className="nkc-focus-indicator",t.style.position="absolute",t.style.borderWidth="5px",t.style.borderStyle="solid",t.style.borderImage="linear-gradient(45deg, #ff5e00 0%, #ffbc00 100%) 1 5% / 1 / 0 stretch",t.style.opacity="0",t.style.boxSizing="border-box",document.body.appendChild(t),r.root=t},r.moveToElement=function(t){var e=t.getBoundingClientRect(),o=e.top,n=e.left,i=t.clientWidth,c=t.clientHeight,s=r.root;o+=window.scrollY,n+=window.scrollX,s.style.top=o-7+"px",s.style.left=n-5+"px",s.style.width=i+10+"px",s.style.height=c+14+"px",s.style.opacity="1"},r.hide=function(){r.root.style.opacity="0"},r}(),a=function(n){function t(t,e){var o=n.call(this)||this;return o.hasMultiplePages=!1,o.hasMoved=!1,o.moveLeft=function(){o.focusPreviousSlide()},o.moveRight=function(){o.focusNextSlide()},o.activate=function(){o.onActivate&&o.currentSlide&&o.onActivate(o.currentSlide)},o.root=t,o.onActivate=e,o.findAllSlides(),o.focusSlideByIndex(),o.handleKeyDown(),o.hasMultiplePages=Boolean(o.root.querySelector(".handleNext")),o.root.querySelector(".handlePrev")&&(o.hasMoved=!0),o}return r(t,n),t.prototype.findAllSlides=function(){var o=this;this.slides=i(".slider-item",this.root).filter(function(t){return"-"!==t.className.substr(-1)}),this.currentSlide&&this.slides.forEach(function(t,e){o.currentSlide===t&&(o.currentSlideIndex=e)})},t.prototype.tearDown=function(){u.hide(),this.onActivate=null,c.off("ArrowLeft",this.moveLeft),c.off("ArrowRight",this.moveRight),c.off("Enter",this.activate)},t.prototype.gotoNextSlidePage=function(){var t=this;this.root.querySelector(".handleNext").click(),u.hide(),setTimeout(function(){t.hasMoved=!0,t.findAllSlides(),t.focusSlideByIndex(1)},800)},t.prototype.gotoPrevSlidePage=function(){var t=this;this.root.querySelector(".handlePrev").click(),u.hide(),setTimeout(function(){t.hasMoved=!0,t.findAllSlides(),t.focusSlideByIndex(t.slides.length-2)},800)},t.prototype.focusSlideByIndex=function(t){void 0===t&&(t=0),this.currentSlide&&u.hide(),this.slides.length>t&&(this.currentSlideIndex=t,this.currentSlide=this.slides[t],u.moveToElement(this.currentSlide))},t.prototype.focusNextSlide=function(){if(this.currentSlide){var t=this.hasMultiplePages&&this.root.querySelector(".handleNext.active"),e=t?2:1;this.slides.length-e>this.currentSlideIndex?(this.findAllSlides(),this.focusSlideByIndex(this.currentSlideIndex+1)):t?this.gotoNextSlidePage():console.warn("Cannot move forward; No more Slides!")}else this.focusSlideByIndex()},t.prototype.focusPreviousSlide=function(){if(this.currentSlide){var t=this.hasMultiplePages&&this.hasMoved&&this.root.querySelector(".handlePrev.active"),e=t?1:0;this.currentSlideIndex>e?(this.findAllSlides(),this.focusSlideByIndex(this.currentSlideIndex-1)):t?this.gotoPrevSlidePage():console.warn("Cannot move backwards; No more Slides!")}else this.focusSlideByIndex()},t.prototype.handleKeyDown=function(){c.on("ArrowLeft",this.moveLeft),c.on("ArrowRight",this.moveRight),c.on("Enter",this.activate)},t}(e),o=function(){function t(){var t=this;this.sections=[],this.moveUp=function(){console.log("Move up"),t.focusPreviousSection()},this.moveDown=function(){console.log("Move down"),t.focusNextSection()},this.findSections(),this.focusSectionByIndex(),this.handleKeyDown()}return t.prototype.findSections=function(){var o=this,t=i(".lolomoRow");this.sections=t,this.currentSection&&t.forEach(function(t,e){o.currentSection===t&&(o.currentSectionIndex=e)})},t.prototype.focusSectionByIndex=function(t){var e,o;void 0===t&&(t=0),this.sections.length-1>t&&(this.currentSectionIndex=t,this.currentSection=this.sections[t]),e=this.currentSection,o=function(t){for(var e=0,o=0,n=t;e+=n.offsetTop||0,o+=n.offsetLeft||0,n=n.offsetParent;);return{top:e,left:o}}(e).top,window.scrollTo(0,o-70),this.currentSectionNavigation&&this.currentSectionNavigation.tearDown(),this.currentSection.matches(n.Slider)?this.currentSectionNavigation=new a(this.currentSection,function(t){var e=t.querySelector("a").href;window.location.href=e}):console.log("Unhandeled Section!")},t.prototype.focusNextSection=function(){this.currentSection?(this.findSections(),this.sections.length-1>this.currentSectionIndex?this.focusSectionByIndex(this.currentSectionIndex+1):console.warn("Cannot move down; No more sections!")):this.focusSectionByIndex()},t.prototype.focusPreviousSection=function(){this.currentSection?(this.findSections(),0<this.currentSectionIndex?this.focusSectionByIndex(this.currentSectionIndex-1):console.warn("Cannot move up; No more sections!")):this.focusSectionByIndex()},t.prototype.handleKeyDown=function(){c.on("ArrowUp",this.moveUp),c.on("ArrowDown",this.moveDown)},t}(),f=function(t){function e(){var e=t.call(this)||this;return e.activeTabType="overview",e.active=!1,e.tabs=[],e.activeTabIndex=-1,e.moveLeft=function(){e.active&&0<e.activeTabIndex&&e.focusTabByIndex(e.activeTabIndex-1)},e.moveRight=function(){e.active&&e.tabs.length-1>e.activeTabIndex&&e.focusTabByIndex(e.activeTabIndex+1)},e.activateFocusedTab=function(){var t=e.tabs[e.activeTabIndex];e.setActiveTabType(),t.querySelector("a").click()},e.findTabs(),e.focusTabByIndex(),e.handleKeyDown(),e}return r(e,t),e.prototype.tearDown=function(){c.off("ArrowLeft",this.moveLeft),c.off("ArrowRight",this.moveRight),u.hide()},e.prototype.activate=function(){this.active=!0},e.prototype.deactivate=function(){this.active=!1},e.prototype.getTabType=function(){return this.activeTabType},e.prototype.findTabs=function(){var t=i(".menu > li");this.tabs=t},e.prototype.focusTabByIndex=function(t){void 0===t&&(t=0),this.activeTab&&u.hide(),this.tabs.length>t&&(this.activeTabIndex=t,this.activeTab=this.tabs[t],u.moveToElement(this.activeTab),this.activateFocusedTab())},e.prototype.setActiveTabType=function(){var t=this.activeTab.className.toLowerCase();t.includes("overview")?this.activeTabType="overview":t.includes("episodes")?this.activeTabType="episodes":t.includes("trailer")?this.activeTabType="trailer":t.includes("like")?this.activeTabType="similar":t.includes("detail")&&(this.activeTabType="details")},e.prototype.handleKeyDown=function(){c.on("ArrowLeft",this.moveLeft),c.on("ArrowRight",this.moveRight)},e}(e),l=function(t){function e(){var e=t.call(this)||this;return e.actions=[],e.focusedActionIndex=-1,e.moveRight=function(){e.actions.length-1>e.focusedActionIndex&&e.focusActionByIndex(e.focusedActionIndex+1)},e.moveLeft=function(){0<e.focusedActionIndex&&e.focusActionByIndex(e.focusedActionIndex-1)},e.activeAction=function(){var t=e.focusedAction;t.href?location.href=t.href:t.click()},e.findActions(),e.focusActionByIndex(),e.handleKeyDown(),e}return r(e,t),e.prototype.tearDown=function(){c.off("ArrowLeft",this.moveLeft),c.off("ArrowRight",this.moveRight),c.off("Enter",this.activeAction),u.hide()},e.prototype.findActions=function(){var t=i(".jawbone-actions a");this.actions=t},e.prototype.focusActionByIndex=function(t){void 0===t&&(t=0),this.focusedAction&&u.hide(),this.actions.length>t&&(this.focusedActionIndex=t,this.focusedAction=this.actions[t],u.moveToElement(this.focusedAction))},e.prototype.handleKeyDown=function(){c.on("ArrowLeft",this.moveLeft),c.on("ArrowRight",this.moveRight),c.on("Enter",this.activeAction)},e}(e),h=function(o){function t(t){var e=o.call(this)||this;return e.listItems=[],e.focusedListItemIndex=-1,e.moveUp=function(){e.isMenuOpen()&&0<e.focusedListItemIndex&&e.focusListItemByIndex(e.focusedListItemIndex-1)},e.moveDown=function(){e.isMenuOpen()&&e.listItems.length-1>e.focusedListItemIndex&&e.focusListItemByIndex(e.focusedListItemIndex+1)},e.activate=function(){e.isMenuOpen()&&e.focusedListItem?(e.focusedListItem.querySelector("a")&&e.focusedListItem.querySelector("a")).click():((e.root.querySelector(".label")&&e.root.querySelector(".label")).click(),e.findListItems(),e.focusListItemByIndex())},e.root=t,e.handleKeyDown(),e}return r(t,o),t.prototype.tearDown=function(){c.off("ArrowUp",this.moveUp),c.off("ArrowDown",this.moveDown),c.off("Enter",this.activate)},t.prototype.isAtBottom=function(){return!this.isMenuOpen()},t.prototype.isAtTop=function(){return!this.isMenuOpen()},t.prototype.findListItems=function(){this.listItems=i(".sub-menu-item",this.root)},t.prototype.focusListItemByIndex=function(t){void 0===t&&(t=0),this.focusedListItem&&u.hide(),this.listItems.length>t&&(this.focusedListItemIndex=t,this.focusedListItem=this.listItems[t],u.moveToElement(this.focusedListItem))},t.prototype.isMenuOpen=function(){return Boolean(this.root.querySelector(".sub-menu"))},t.prototype.handleKeyDown=function(){c.on("ArrowUp",this.moveUp),c.on("ArrowDown",this.moveDown),c.on("Enter",this.activate)},t}(e),d=function(e){function t(){var t=e.call(this)||this;return t.focusedSection="episodes",t.moveUp=function(){t.activeNavigation.isAtTop()&&(document.querySelector(".single-season-label")||"episodes"===t.focusedSection&&(t.focusedSection="seasons",t.focusSection()))},t.moveDown=function(){t.activeNavigation.isAtBottom()&&"seasons"===t.focusedSection&&(t.focusedSection="episodes",t.focusSection())},t.focusSection(),t.handleKeyDown(),t}return r(t,e),t.prototype.tearDown=function(){c.off("ArrowUp",this.moveUp),c.off("ArrowDown",this.moveDown)},t.prototype.isAtTop=function(){return"seasons"===this.focusedSection},t.prototype.isAtBottom=function(){return"episodes"===this.focusedSection},t.prototype.focusSection=function(){var t=document.querySelector(".episodesContainer .nfDropDown"),e=document.querySelector(".episodeWrapper");this.activeNavigation&&this.activeNavigation.tearDown(),"seasons"===this.focusedSection?this.activeNavigation=new h(t):this.activeNavigation=new a(e,function(t){var e=t.querySelector("a");e.href?location.href=e.href:e.click()})},t.prototype.handleKeyDown=function(){c.on("ArrowUp",this.moveUp),c.on("ArrowDown",this.moveDown)},t}(e),v=function(){function t(){var t=this;this.activeSection="content",this.focusSection=function(){document.querySelector(".jawBoneCommon"),document.querySelector(".menu");if(t.activeSectionNavigation&&t.activeSectionNavigation.tearDown(),"content"===t.activeSection)switch(t.tablistNavigation.deactivate(),t.tablistNavigation.getTabType()){case"overview":t.activeSectionNavigation=new l;break;case"episodes":t.activeSectionNavigation=new d}else t.tablistNavigation.activate()},this.moveUp=function(){"tablist"===t.activeSection&&(t.activeSection="content",t.focusSection())},this.moveDown=function(){"content"===t.activeSection&&t.activeSectionNavigation.isAtBottom()&&(t.activeSection="tablist",t.focusSection())},this.tablistNavigation=new f,this.focusSection(),this.handleKeyDown()}return t.prototype.tearDown=function(){c.off("ArrowUp",this.moveUp),c.off("ArrowDown",this.moveDown),this.tablistNavigation.tearDown()},t.prototype.handleKeyDown=function(){c.on("ArrowUp",this.moveUp),c.on("ArrowDown",this.moveDown)},t}(),p=function(){function t(){var e=this;this.profiles=[],this.focusedProfileIndex=-1,this.moveRight=function(){e.profiles.length-1>e.focusedProfileIndex&&e.focusProfileByIndex(e.focusedProfileIndex+1)},this.moveLeft=function(){0<e.focusedProfileIndex&&e.focusProfileByIndex(e.focusedProfileIndex-1)},this.activateProfile=function(){var t=e.focusedProfile.querySelector("a");location.href=t.href},this.findProfiles(),this.focusProfileByIndex(),this.handleKeydown()}return t.prototype.findProfiles=function(){this.profiles=i(".profile")},t.prototype.focusProfileByIndex=function(t){void 0===t&&(t=0),this.focusedProfile&&u.hide(),this.profiles.length>t&&(this.focusedProfileIndex=t,this.focusedProfile=this.profiles[t],u.moveToElement(this.focusedProfile))},t.prototype.handleKeydown=function(){c.on("ArrowLeft",this.moveLeft),c.on("ArrowRight",this.moveRight),c.on("Enter",this.activateProfile)},t}();c.init();try{u.init(),(t=location.href).match(/browse/g)?document.querySelector(".profiles-gate-container")?new p:new o:t.match(/title/g)?new v:t.match(/watch/g)&&c.on("Escape",function(){document.querySelector(".button-nfplayerBack").click()});var y=new MutationObserver(function(t){console.log("mutation..."),document.querySelector(".profiles-gate-container")&&location.reload()}),m=document.querySelector("#appMountPoint");y.observe(m,{childList:!0})}catch(t){console.error(t)}c.on("Home",function(){return location.href="https://www.netflix.com/browse"}),c.on("End",function(){return location.reload()})}();
